<!DOCTYPE html><html><head><title>Index | NodObjC v0.0.12</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="assets/styles.css" rel="stylesheet"><link href="assets/ir_black.css" rel="stylesheet"><script src="assets/jquery-1.7.1.js" type="text/javascript"></script><script src="assets/script.js" type="text/javascript"></script></head><body><div id="content"><a href="index.html" id="title"><h1>NodObjC</h1><h3>The NodeJS &#8646; Objective-C Bridge</h3></a><div class="toc"><span class="page"><a href="block.html">block</a></span><span class="page"><a href="bridgesupport.html">bridgesupport</a></span><span class="page"><a href="class.html">class</a></span><span class="page"><a href="core.html">core</a></span><span class="page"><a href="exception.html">exception</a></span><span class="page"><a href="ffi-extend.html">ffi-extend</a></span><span class="page"><a href="global.html">global</a></span><span class="page"><a href="id.html">id</a></span><span class="page"><a href="imp.html">imp</a></span><span class="page"><a href="import.html">import</a></span><span class="page"><a href="index.html">index</a></span><span class="page"><a href="ivar.html">ivar</a></span><span class="page"><a href="method.html">method</a></span><span class="page"><a href="sel.html">sel</a></span><span class="page"><a href="struct.html">struct</a></span><span class="page"><a href="types.html">types</a></span></div><h2>Index</h2><div class="part"><div class="desc"><p><strong>NodObjC</strong> is the bridge between NodeJS and the Objective-C runtime and
frameworks, making it possible to write native Cocoa applications (both GUI and
command-line) using 100% NodeJS. Applications are written entirely in
JavaScript and interpreted at runtime.

</p>
<h2>Getting Started</h2>
<p>Every <strong>NodObjC</strong> application begins with requiring the <code>NodObjC</code> module.
You can name the returned module variable anything you want, but the
&quot;canonical&quot; name for it is <code>$</code>. This is mostly because you&#39;re going to be using
the variable all over the place, and probably want to keep it short.

</p>
<pre><code><span class="keyword">var</span> $ = require(<span class="string">'NodObjC'</span>)</code></pre>
<p>The next step is to <a href="import.html"><code>import()</code></a> a desired &quot;Framework&quot; that is
installed on the system. These frameworks are the APIs provided to Objective-C,
which could be the default frameworks (provided by Apple) or 3rd party
frameworks written by others (or you). The &quot;Foundation&quot; framework is the...
well.. foundation of these APIs, providing the most basic and important
classes like <code>NSString</code> and <code>NSArray</code>.

</p>
<pre><code>$.import(<span class="string">'Foundation'</span>)</code></pre>
<p><a href="import.html"><code>import()</code></a> doesn&#39;t return anything, however it will throw an
Error if anything goes wrong. What happens after the import call is that the
<code>$</code> variable now has a whole bunch of new properties attached to it, the
exports from the imported framework. At this point, you can fully interact
with these Objective-C classes, creating instances, subclassing, swizzling,
etc.

</p>
<p>A lot of core classes expect an <code>NSAutoreleasePool</code> instance on the stack, so
the first Objective-C object instance you create is usually one of those.

</p>
<pre><code><span class="keyword">var</span> pool = $.NSAutoreleasePool(<span class="string">'alloc'</span>)(<span class="string">'init'</span>)</code></pre>
<p>Pretty simple! You don&#39;t need to worry about the autorelease pool after this.
Now, for an example, try creating an <code>NSArray</code> instance, well, an
<code>NSMutableArray</code> technically, so we can also add an <code>NSString</code> to it.

</p>
<pre><code><span class="keyword">var</span> array = $.NSMutableArray(<span class="string">'alloc'</span>)(<span class="string">'init'</span>)

array(<span class="string">'addObject'</span>, $(<span class="string">'Hello World!'</span>))

console.log(array)
<span class="comment">// (</span>
<span class="comment">//     "Hello World!"</span>
<span class="comment">// )</span></code></pre>
<p>So there&#39;s an <code>NSArray</code> instance with a <code>count</code> (Objective-C&#39;s version of
<code>Array#length</code>) of <code>1</code>, containing an <code>NSString</code> with the text &quot;Hello World!&quot;.
From here on out, you will need to refer to your Cocoa documentation for the
rest of the available methods <code>NSArray</code> offers.

</p>
<h2>Message Sending Syntax</h2>
<p>To send an Objective-C message to an Objective-C object using <strong>NodObjC</strong>, you
have to <strong>invoke the object as a function</strong>, where the <strong>even number arguments
make up the message name</strong> and the <strong>odd numbered arguments are the arguments</strong>
to send to the <a href="id.html">object</a>.

</p>
<pre><code>object(<span class="string">'messageNameWithArg'</span>, someArg, <span class="string">'andArg'</span>, anotherArg)</code></pre>
<p>This sounds and probably looks strange at first, but this is the cleanest
syntax while still being valid JS. It also maintains the &quot;readabililty&quot; of
typical Objective-C method names.

</p>
<h2>Dynamic Object Introspection</h2>
<p>Since <strong>NodObjC</strong> runs in an interpreted environment, it is actually <em>very
easy</em> to dynamically inspect the defined methods, instance variables (ivars),
implemented protocols, and more of any given Objective-C object (a.k.a.
<a href="id.html"><code>id</code></a> instances).

</p>
<p>Using the same <code>array</code> instance as before, you can retreive a list of the
type of class, and it&#39;s subclasses, by calling the <code>.ancestors()</code> function.

</p>
<pre><code>array.ancestors()
<span class="comment">// [ '__NSArrayM',</span>
<span class="comment">//   'NSMutableArray',</span>
<span class="comment">//   'NSArray',</span>
<span class="comment">//   'NSObject' ]</span></code></pre>
<p>Also commonly of interest are the given methods an object responds to. Use the
<code>.methods()</code> function for that.

</p>
<pre><code>array.methods()
<span class="comment">// [ 'addObject:',</span>
<span class="comment">//   'copyWithZone:',</span>
<span class="comment">//   'count',</span>
<span class="comment">//   'dealloc',</span>
<span class="comment">//   'finalize',</span>
<span class="comment">//   'getObjects:range:',</span>
<span class="comment">//   'indexOfObjectIdenticalTo:',</span>
<span class="comment">//   'insertObject:atIndex:',</span>
<span class="comment">//   'objectAtIndex:',</span>
<span class="comment">//   'removeLastObject',</span>
<span class="comment">//   'removeObjectAtIndex:',</span>
<span class="comment">//   'replaceObjectAtIndex:withObject:' ]</span></code></pre>
<h2>More Docs</h2>
<p>Check out the rest of the doc pages for some of the other important
<strong>NodObjC</strong> pieces.

</p>
<ul>
<li><a href="block.html">Block</a> - How to use an Objective-C &quot;block&quot; function.</li>
<li><a href="class.html">Class</a> - Subclassing and adding methods at runtime.</li>
<li><a href="exception.html">Exception</a> - <strong>NodObjC</strong> exceptions <em>are</em> JavaScript <code>Error</code> objects.</li>
<li><a href="id.html">id</a> - The wrapper class for every Objective-C object.</li>
<li><a href="import.html">Import</a> - Importing &quot;Frameworks&quot; into the process.</li>
<li><a href="ivar.html">Ivars</a> - Instance variable definitions.</li>
<li><a href="method.html">Method</a> - Method definitions and swizzling.</li>
<li><a href="struct.html">Structs</a> - Using Structs and C functions in <strong>NodObjC</strong>.</li>
</ul>
</div></div><div class="part"><div class="desc"><p>This function accepts native JS types (<code>String</code>, <code>Number</code>, <code>Date</code>) and converts
them to the proper Objective-C type (<code>NSString</code>, <code>NSNumber</code>, <code>NSDate</code>).

</p>
<p>Often times, you will use this function to cast a JS String into an NSString
for methods that accept NSStrings (since NodObjC doesn&#39;t automatically cast to
NSStrings in those instances).

</p>
<pre><code><span class="keyword">var</span> jsString = <span class="string">'a javascript String'</span>
<span class="keyword">var</span> nsString = $(jsString)

$.NSLog(nsString)</code></pre>
</div><button class="show-code">Show Code</button><pre class="code"><code><span class="function"><span class="keyword">function</span> <span class="title">$</span> <span class="params">(o)</span> {</span>
  <span class="keyword">var</span> t = <span class="keyword">typeof</span> o
  <span class="keyword">if</span> (t == <span class="string">'string'</span>) {
    <span class="keyword">return</span> $.NSString(<span class="string">'stringWithUTF8String'</span>, String(o))
  } <span class="keyword">else</span> <span class="keyword">if</span> (t == <span class="string">'number'</span>) {
    <span class="keyword">return</span> $.NSNumber(<span class="string">'numberWithDouble'</span>, Number(o))
  } <span class="keyword">else</span> <span class="keyword">if</span> (isDate(o)) {
    <span class="keyword">return</span> $.NSDate(<span class="string">'dateWithTimeIntervalSince1970'</span>, o / <span class="number">1000</span>)
  }
  <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Unsupported object passed in to convert: '</span> + o)
}</code></pre></div></div><div id="footer">NodObjC &copy; 2011-2012 Nathan Rajlich. Documentation generated by <a href="https://github.com/visionmedia/dox">dox</a>.</div><a href="http://github.com/TooTallNate/NodObjC"><img id="ribbon" src="https://a248.e.akamai.net/camo.github.com/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a></body></html>
